"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2935],{61328:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"installation/configuration","title":"Configuration options","description":"Komga has sensible default values for all configuration keys. You only need to configure it if you want to change the default behaviour.","source":"@site/docs/installation/configuration.mdx","sourceDirName":"installation","slug":"/installation/configuration","permalink":"/docs/installation/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/gotson/komga-website/tree/master/website/docs/installation/configuration.mdx","tags":[],"version":"current","lastUpdatedAt":1754385636000,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Install via AUR (Arch User Repository)","permalink":"/docs/installation/thirdparty/aur"},"next":{"title":"Expose your server","permalink":"/docs/installation/https"}}');var s=i(62540),a=i(43023),t=i(49479),r=i(22491);const l={},c="Configuration options",d={},h=[{value:"Optional configuration",id:"optional-configuration",level:2},{value:"KOMGA_CONFIGDIR / komga.config-dir: <code>&lt;directory&gt;</code>",id:"komga_configdir--komgaconfig-dir-directory",level:4},{value:"SERVER_PORT / server.port: <code>&lt;port&gt;</code>",id:"server_port--serverport-port",level:4},{value:"SERVER_SERVLET_CONTEXTPATH / server.servlet.context-path: <code>&lt;baseUrl&gt;</code>",id:"server_servlet_contextpath--serverservletcontext-path-baseurl",level:4},{value:"SERVER_SERVLET_SESSION_TIMEOUT / server.servlet.session.timeout: <code>&lt;duration&gt;</code>",id:"server_servlet_session_timeout--serverservletsessiontimeout-duration",level:4},{value:"KOMGA_DATABASE_FILE / komga.database.file: <code>&lt;file path&gt;</code>",id:"komga_database_file--komgadatabasefile-file-path",level:4},{value:"KOMGA_TASKSDB_FILE / komga.tasks-db.file: <code>&lt;file path&gt;</code>",id:"komga_tasksdb_file--komgatasks-dbfile-file-path",level:4},{value:"KOMGA_CORS_ALLOWEDORIGINS / komga.cors.allowed-origins: <code>&lt;origins&gt;</code>",id:"komga_cors_allowedorigins--komgacorsallowed-origins-origins",level:4},{value:"KOMGA_OAUTH2ACCOUNTCREATION / komga.oauth2-account-creation: <code>&lt;true/false&gt;</code>",id:"komga_oauth2accountcreation--komgaoauth2-account-creation-truefalse",level:4},{value:"KOMGA_OIDCEMAILVERIFICATION / komga.oidc-email-verification: <code>&lt;true/false&gt;</code>",id:"komga_oidcemailverification--komgaoidc-email-verification-truefalse",level:4},{value:"LOGGING_FILE_NAME / logging.file.name: <code>&lt;logfile name&gt;</code>",id:"logging_file_name--loggingfilename-logfile-name",level:4},{value:"Sample configuration file",id:"sample-configuration-file",level:2},{value:"Databases configuration",id:"databases-configuration",level:2},{value:"Local filesystem check",id:"local-filesystem-check",level:3},{value:"Fine tuning",id:"fine-tuning",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"configuration-options",children:"Configuration options"})}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.p,{children:"Komga has sensible default values for all configuration keys. You only need to configure it if you want to change the default behaviour."}),(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"application.yml"})," file does not exist by default, you need to create one if you want to customize the configuration."]})]}),"\n",(0,s.jsxs)(n.p,{children:["Komga relies heavily on ",(0,s.jsx)(n.a,{href:"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html",children:"Spring Boot's configuration"}),", leveraging ",(0,s.jsx)(n.code,{children:"profiles"})," and configuration ",(0,s.jsx)(n.code,{children:"properties"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The easiest way to configure is either via environment variables (a good fit for ",(0,s.jsx)(n.code,{children:"docker"})," and ",(0,s.jsx)(n.code,{children:"docker compose"}),") or by using an ",(0,s.jsx)(n.code,{children:"application.yml"})," file located in the configuration directory:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The Docker image will load any ",(0,s.jsx)(n.code,{children:"application.yml"})," file located in the ",(0,s.jsx)(n.code,{children:"/config"})," mounted folder."]}),"\n",(0,s.jsxs)(n.li,{children:["The Jar will load any ",(0,s.jsx)(n.code,{children:"application.yml"})," file located in the ",(0,s.jsx)(n.code,{children:"komga.config-dir"})," directory (defaults to ",(0,s.jsx)(n.code,{children:"~/.komga"}),", ",(0,s.jsx)(n.a,{href:"#komga_configdir--komgaconfig-dir-directory",children:"more details"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Each configuration key can have a different format depending if it's from the environment variable, or from the ",(0,s.jsx)(n.code,{children:"application.yml"})," file. In the following section both format will be provided in the form ",(0,s.jsx)(n.code,{children:"ENVIRONMENT_VARIABLE"})," / ",(0,s.jsx)(n.code,{children:"application-property"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["You can also specify configuration via the command line, when launching the ",(0,s.jsx)(n.code,{children:"jar"}),". Use the ",(0,s.jsx)(n.code,{children:"application-property"})," form, and prefix with ",(0,s.jsx)(n.code,{children:"--"}),". For example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'java -jar komga.jar --server.servlet.context-path="/komga" --server.port=8443\n'})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"To convert a property name to an environment variable name you can follow these rules:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Replace dots ",(0,s.jsx)(n.code,{children:"."})," with underscores ",(0,s.jsx)(n.code,{children:"_"})]}),"\n",(0,s.jsxs)(n.li,{children:["Remove any dashes ",(0,s.jsx)(n.code,{children:"-"})]}),"\n",(0,s.jsx)(n.li,{children:"Convert to uppercase"}),"\n"]}),(0,s.jsxs)(n.p,{children:["For example, the configuration property ",(0,s.jsx)(n.code,{children:"server.servlet.context-path"})," would be an environment variable named ",(0,s.jsx)(n.code,{children:"SERVER_SERVLET_CONTEXTPATH"}),"."]})]}),"\n",(0,s.jsx)(n.h2,{id:"optional-configuration",children:"Optional configuration"}),"\n",(0,s.jsx)(n.p,{children:"You can use some optional configuration keys:"}),"\n",(0,s.jsxs)(n.h4,{id:"komga_configdir--komgaconfig-dir-directory",children:["KOMGA_CONFIGDIR / komga.config-dir: ",(0,s.jsx)(n.code,{children:"<directory>"})]}),"\n",(0,s.jsx)(n.p,{children:"The Komga configuration directory. Will be used to store the logs, database, and any other file Komga needs."}),"\n",(0,s.jsx)(n.p,{children:"Defaults to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"%LOCALAPPDATA%/Komga"})," on the ",(0,s.jsx)(n.em,{children:"Windows app"}),". That folder is virtualized by Windows."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"~/Library/Application Support/Komga"})," on the macOS app."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"~/.komga"})," otherwise."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"~"})," is your home directory on Unix, and your User profile on Windows."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["When overriding this configuration, you need to use ",(0,s.jsx)(n.code,{children:"${user.home}"})," instead of ",(0,s.jsx)(n.code,{children:"~"})," (this is a specific Spring Boot variable)."]})}),"\n",(0,s.jsxs)(n.h4,{id:"server_port--serverport-port",children:["SERVER_PORT / server.port: ",(0,s.jsx)(n.code,{children:"<port>"})]}),"\n",(0,s.jsx)(n.p,{children:"Port to listen to for the API and web interface."}),"\n",(0,s.jsxs)(n.p,{children:["Can also be configured from the ",(0,s.jsx)(n.a,{href:"/docs/guides/server-settings#server-port",children:"Server Settings"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Defaults to ",(0,s.jsx)(n.code,{children:"25600"}),"."]}),"\n",(0,s.jsxs)(n.h4,{id:"server_servlet_contextpath--serverservletcontext-path-baseurl",children:["SERVER_SERVLET_CONTEXTPATH / server.servlet.context-path: ",(0,s.jsx)(n.code,{children:"<baseUrl>"})]}),"\n",(0,s.jsx)(n.p,{children:"Base URL, useful if you need to reverse proxy with a subfolder."}),"\n",(0,s.jsxs)(n.p,{children:["Can also be configured from the ",(0,s.jsx)(n.a,{href:"/docs/guides/server-settings#base-url",children:"Server Settings"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Defaults to ",(0,s.jsx)(n.code,{children:"/"}),"."]}),"\n",(0,s.jsxs)(n.h4,{id:"server_servlet_session_timeout--serverservletsessiontimeout-duration",children:["SERVER_SERVLET_SESSION_TIMEOUT / server.servlet.session.timeout: ",(0,s.jsx)(n.code,{children:"<duration>"})]}),"\n",(0,s.jsxs)(n.p,{children:["The duration after which an inactive session will expire. You can specify the timeunit, for example ",(0,s.jsx)(n.code,{children:"14d"})," for 14 days, or ",(0,s.jsx)(n.code,{children:"24h"})," for 24 hours. If no unit is set, seconds will be used."]}),"\n",(0,s.jsx)(n.p,{children:"Defaults to 30 minutes."}),"\n",(0,s.jsxs)(n.h4,{id:"komga_database_file--komgadatabasefile-file-path",children:["KOMGA_DATABASE_FILE / komga.database.file: ",(0,s.jsx)(n.code,{children:"<file path>"})]}),"\n",(0,s.jsx)(n.p,{children:"File path for the main SQLite database."}),"\n",(0,s.jsxs)(n.p,{children:["If you want to change the directory, it is advised to change ",(0,s.jsx)(n.code,{children:"komga.config-dir"})," instead."]}),"\n",(0,s.jsx)(n.p,{children:"Defaults to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/config/database.sqlite"})," for ",(0,s.jsx)(n.em,{children:"Docker"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"\\${komga.config-dir}/database.sqlite"})," otherwise."]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"komga_tasksdb_file--komgatasks-dbfile-file-path",children:["KOMGA_TASKSDB_FILE / komga.tasks-db.file: ",(0,s.jsx)(n.code,{children:"<file path>"})]}),"\n",(0,s.jsx)(n.p,{children:"File path for the tasks SQLite database."}),"\n",(0,s.jsxs)(n.p,{children:["If you want to change the directory, it is advised to change ",(0,s.jsx)(n.code,{children:"komga.config-dir"})," instead."]}),"\n",(0,s.jsx)(n.p,{children:"Defaults to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/config/tasks.sqlite"})," for ",(0,s.jsx)(n.em,{children:"Docker"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"\\${komga.config-dir}/tasks.sqlite"})," otherwise."]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"komga_cors_allowedorigins--komgacorsallowed-origins-origins",children:["KOMGA_CORS_ALLOWEDORIGINS / komga.cors.allowed-origins: ",(0,s.jsx)(n.code,{children:"<origins>"})]}),"\n",(0,s.jsx)(n.p,{children:"A list of origins to allow for CORS."}),"\n",(0,s.jsx)(n.p,{children:"Defaults to empty list."}),"\n",(0,s.jsxs)(n.h4,{id:"komga_oauth2accountcreation--komgaoauth2-account-creation-truefalse",children:["KOMGA_OAUTH2ACCOUNTCREATION / komga.oauth2-account-creation: ",(0,s.jsx)(n.code,{children:"<true/false>"})]}),"\n",(0,s.jsx)(n.p,{children:"A boolean indicating whether Komga should create new users when a login via OAuth2/OIDC succeeds, but there is no existing user with that email."}),"\n",(0,s.jsxs)(n.p,{children:["Such users will be created with a random password, which the user can subsequently change from the ",(0,s.jsx)(n.em,{children:"Account Settings"})," page later on, for example to be able to connect using OPDS or Mihon."]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"It is recommended to enable this only with OAuth2 providers you control"})}),"\n",(0,s.jsxs)(n.p,{children:["Defaults to ",(0,s.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,s.jsxs)(n.h4,{id:"komga_oidcemailverification--komgaoidc-email-verification-truefalse",children:["KOMGA_OIDCEMAILVERIFICATION / komga.oidc-email-verification: ",(0,s.jsx)(n.code,{children:"<true/false>"})]}),"\n",(0,s.jsxs)(n.p,{children:["A boolean indicating whether Komga should check whether the ",(0,s.jsx)(n.code,{children:"email_verified"})," claim is present and true in the OpenID Connect request."]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"It is recommended to disable this only with OIDC providers that do not verify emails (like Azure AD)"})}),"\n",(0,s.jsxs)(n.p,{children:["Defaults to ",(0,s.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,s.jsxs)(n.h4,{id:"logging_file_name--loggingfilename-logfile-name",children:["LOGGING_FILE_NAME / logging.file.name: ",(0,s.jsx)(n.code,{children:"<logfile name>"})]}),"\n",(0,s.jsx)(n.p,{children:"Name of the log file."}),"\n",(0,s.jsxs)(n.p,{children:["If you want to change the directory, it is advised to change ",(0,s.jsx)(n.code,{children:"komga.config-dir"})," instead."]}),"\n",(0,s.jsx)(n.p,{children:"Defaults to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"~/Library/Logs/Komga/komga.log"})," for the ",(0,s.jsx)(n.em,{children:"macOS app"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/config/logs/komga.log"})," for ",(0,s.jsx)(n.em,{children:"Docker"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"\\${komga.config-dir}/komga.log"})," otherwise."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"~"})," is your home directory on Unix, and your User profile on Windows."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["When overriding this configuration, you need to use ",(0,s.jsx)(n.code,{children:"${user.home}"})," instead of ",(0,s.jsx)(n.code,{children:"~"})," (this is a specific Spring Boot variable)."]})}),"\n",(0,s.jsx)(n.h2,{id:"sample-configuration-file",children:"Sample configuration file"}),"\n",(0,s.jsxs)(n.p,{children:["Here is a sample ",(0,s.jsx)(n.code,{children:"application.yml"})," file in case you need to customize it. ",(0,s.jsx)(n.strong,{children:"Only keep the lines you need."})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Only keep lines that are relevant to you!\n# Lines starting with # are comments\n# Make sure indentation is correct (2 spaces at every indentation level), yaml is very sensitive!\nkomga:\n  database:\n    file: ${user.home}/.komga/database.sqlite\n  cors.allowed-origins:\n    - http://localhost:8081\n    - http://localhost:8082\nserver:\n  port: 25600\n  servlet:\n    session.timeout: 7d # session timeout, here 7 days\n    context-path: /komga\n"})}),"\n",(0,s.jsx)(n.h2,{id:"databases-configuration",children:"Databases configuration"}),"\n",(0,s.jsx)(n.p,{children:"Komga uses 2 SQLite databases:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"a main database to store all the data"}),"\n",(0,s.jsx)(n.li,{children:"a tasks database to store background tasks"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"local-filesystem-check",children:"Local filesystem check"}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["SQLite ",(0,s.jsx)(n.a,{href:"https://sqlite.org/useovernet.html",children:"should not be used on network filesystems"})," like CIFS or NFS. Always use a local filesystem for the databases."]})}),"\n",(0,s.jsx)(n.p,{children:"Komga will perform a check on startup to ensure that the databases are on a local filesystem, and will stop if it is not the case."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"If you know what you are doing"}),", the local filesystem check can be disabled using:"]}),"\n",(0,s.jsxs)(t.A,{children:[(0,s.jsx)(r.default,{value:"yaml",label:"application.yml",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yml",children:"komga:\n  database.check-local-filesystem: false\n  tasks-db.check-local-filesystem: false\n"})})}),(0,s.jsx)(r.default,{value:"env",label:"Environment variable",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"KOMGA_DATABASE_CHECKLOCALFILESYSTEM=FALSE\nKOMGA_TASKSDB_CHECKLOCALFILESYSTEM=FALSE\n"})})})]}),"\n",(0,s.jsx)(n.h3,{id:"fine-tuning",children:"Fine tuning"}),"\n",(0,s.jsx)(n.p,{children:"Configuration keys are available for each of the database to allow fine tuning:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"komga:\n  # the main database\n  database:\n    # sets the retry timeout when SQLITE_BUSY error happens\n    busy-timeout: 30s\n    \n    # changes the journal mode\n    # accepted values are: DELETE, TRUNCATE, PERSIST, MEMORY, WAL, OFF\n    # most likely to be set to wal if needed, check https://sqlite.org/wal.html for more details\n    journal-mode: wal\n    \n    # pool size will determine the number of connections in the pool\n    # this takes precedence over max-pool-size if set\n    # defaults to undefined\n    pool-size: 1\n    \n    # max-pool-size will determine the maximum number of connections in the pool\n    # when set, the number of connections is set to the number of available processors capped at max-pool-size\n    # defaults to 1\n    max-pool-size: 8\n    \n    # pragmas accepts a list of key/value pairs where:\n    # - key is the pragma name (see https://www.sqlite.org/pragma.html)\n    # - value is the pragma value\n    pragmas:\n      # here are some example pragmas\n      page_size: 4096\n      synchronous: NORMAL\n\n  # the tasks database\n  tasks-db:\n    # can use the same configuration keys as mentioned for the main database\n    busy-timeout: 30s\n"})})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},49479:(e,n,i)=>{i.d(n,{A:()=>m});var o=i(63696),s=i(11750),a=i(90766),t=i(75373),r=i(86681);const l={tabList:"tabList_J5MA",tabItem:"tabItem_l0OV"};var c=i(62540);function d({className:e,block:n,selectedValue:i,selectValue:o,tabValues:t}){const r=[],{blockElementScrollPositionUntilNextRender:d}=(0,a.a_)(),h=e=>{const n=e.currentTarget,s=r.indexOf(n),a=t[s].value;a!==i&&(d(n),o(a))},u=e=>{let n=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const i=r.indexOf(e.currentTarget)+1;n=r[i]??r[0];break}case"ArrowLeft":{const i=r.indexOf(e.currentTarget)-1;n=r[i]??r[r.length-1];break}}n?.focus()};return(0,c.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:t.map((({value:e,label:n,attributes:o})=>(0,c.jsx)("li",{role:"tab",tabIndex:i===e?0:-1,"aria-selected":i===e,ref:e=>{r.push(e)},onKeyDown:u,onClick:h,...o,className:(0,s.A)("tabs__item",l.tabItem,o?.className,{"tabs__item--active":i===e}),children:n??e},e)))})}function h({lazy:e,children:n,selectedValue:i}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find((e=>e.props.value===i));return e?(0,o.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,c.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function u(e){const n=(0,t.u)(e);return(0,c.jsxs)("div",{className:(0,s.A)("tabs-container",l.tabList),children:[(0,c.jsx)(d,{...n,...e}),(0,c.jsx)(h,{...n,...e})]})}function m(e){const n=(0,r.default)();return(0,c.jsx)(u,{...e,children:(0,t.v)(e.children)},String(n))}}}]);