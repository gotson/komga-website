<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuration options | Komga</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Free and open source comics/mangas media server">
    
    <link rel="preload" href="/assets/css/0.styles.ca2c8567.css" as="style"><link rel="preload" href="/assets/js/app.c8d3c045.js" as="script"><link rel="preload" href="/assets/js/3.51ebd44a.js" as="script"><link rel="preload" href="/assets/js/35.be5a375f.js" as="script"><link rel="preload" href="/assets/js/4.d9766c2e.js" as="script"><link rel="prefetch" href="/assets/js/10.76e782c6.js"><link rel="prefetch" href="/assets/js/11.ba836c20.js"><link rel="prefetch" href="/assets/js/12.14005abd.js"><link rel="prefetch" href="/assets/js/13.91f2d794.js"><link rel="prefetch" href="/assets/js/14.3a2c0e84.js"><link rel="prefetch" href="/assets/js/15.543263c1.js"><link rel="prefetch" href="/assets/js/16.c6cf7b0e.js"><link rel="prefetch" href="/assets/js/17.97825433.js"><link rel="prefetch" href="/assets/js/18.1477dcb4.js"><link rel="prefetch" href="/assets/js/19.96211dca.js"><link rel="prefetch" href="/assets/js/20.32e66b7b.js"><link rel="prefetch" href="/assets/js/21.68996be5.js"><link rel="prefetch" href="/assets/js/22.b77b8773.js"><link rel="prefetch" href="/assets/js/23.d015a7c8.js"><link rel="prefetch" href="/assets/js/24.6e1c53f9.js"><link rel="prefetch" href="/assets/js/25.0c80bad2.js"><link rel="prefetch" href="/assets/js/26.ddc5a7a3.js"><link rel="prefetch" href="/assets/js/27.96bd4513.js"><link rel="prefetch" href="/assets/js/28.f3499206.js"><link rel="prefetch" href="/assets/js/29.f68fef8b.js"><link rel="prefetch" href="/assets/js/30.b1eae847.js"><link rel="prefetch" href="/assets/js/31.835d135f.js"><link rel="prefetch" href="/assets/js/32.6f1b6b71.js"><link rel="prefetch" href="/assets/js/33.0736b521.js"><link rel="prefetch" href="/assets/js/34.11caaeaa.js"><link rel="prefetch" href="/assets/js/36.639f03b5.js"><link rel="prefetch" href="/assets/js/37.512a0056.js"><link rel="prefetch" href="/assets/js/38.f37f6c10.js"><link rel="prefetch" href="/assets/js/39.7e95f859.js"><link rel="prefetch" href="/assets/js/40.66990bd1.js"><link rel="prefetch" href="/assets/js/5.4a8ecfe1.js"><link rel="prefetch" href="/assets/js/6.74cd1fdd.js"><link rel="prefetch" href="/assets/js/7.22275b86.js"><link rel="prefetch" href="/assets/js/8.daf1a658.js"><link rel="prefetch" href="/assets/js/9.9dbba591.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5ce0f406.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca2c8567.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/media/logo.svg" alt="Komga" class="logo"> <span class="site-name can-hide">Komga</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/installation/" class="nav-link router-link-active">
  Help
</a></div><div class="nav-item"><a href="/guides/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="https://discord.gg/TdRpkDu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/gotson/komga" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/installation/" class="nav-link router-link-active">
  Help
</a></div><div class="nav-item"><a href="/guides/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="https://discord.gg/TdRpkDu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/gotson/komga" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/faq/" class="sidebar-link">FAQ</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Installation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/installation/" aria-current="page" class="sidebar-link">Getting Started</a></li><li><a href="/installation/docker.html" class="sidebar-link">Run with Docker</a></li><li><a href="/installation/jar.html" class="sidebar-link">Run with the Jar file</a></li><li><a href="/installation/thirdparty.html" class="sidebar-link">Install via third-party integrations</a></li><li><a href="/installation/webui.html" class="sidebar-link">Accessing the web interface</a></li><li><a href="/installation/configuration.html" aria-current="page" class="active sidebar-link">Configuration options</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/installation/configuration.html#optional-configuration" class="sidebar-link">Optional configuration</a></li><li class="sidebar-sub-header"><a href="/installation/configuration.html#sample-configuration-file" class="sidebar-link">Sample Configuration File</a></li><li class="sidebar-sub-header"><a href="/installation/configuration.html#database-performance" class="sidebar-link">Database performance</a></li><li class="sidebar-sub-header"><a href="/installation/configuration.html#https" class="sidebar-link">HTTPS</a></li><li class="sidebar-sub-header"><a href="/installation/configuration.html#reverse-proxy" class="sidebar-link">Reverse proxy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/installation/configuration.html#caddy-v1" class="sidebar-link">Caddy (v1)</a></li><li class="sidebar-sub-header"><a href="/installation/configuration.html#caddy-v2" class="sidebar-link">Caddy (v2)</a></li></ul></li></ul></li><li><a href="/installation/oauth2.html" class="sidebar-link">Social login</a></li></ul></section></li><li><a href="/guides/" class="sidebar-link">Guides</a></li><li><a href="/contribution/" class="sidebar-link">Contribution</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="configuration-options"><a href="#configuration-options" class="header-anchor">#</a> Configuration options</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Komga has sensible default values for all configuration keys. You only need to configure it if you want to change the default behaviour.</p> <p>The <code>application.yml</code> file does not exist by default, you need to create one if you want to customize the configuration.</p></div> <p>Komga relies heavily on <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html" target="_blank" rel="noopener noreferrer">Spring Boot's configuration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, leveraging <code>profiles</code> and configuration <code>properties</code>.</p> <p>The easiest way to configure is either via environment variables (a good fit for <code>docker</code> and <code>docker-compose</code>) or by using an <code>application.yml</code> file located in the configuration directory:</p> <ul><li>The Docker image will load any <code>application.yml</code> file located in the <code>/config</code> mounted folder.</li> <li>The Jar will load any <code>application.yml</code> file located in the <code>komga.config-dir</code> directory (defaults to <code>~/.komga</code>, <a href="#komga-configdir-komga-config-dir-directory">more details</a>).</li></ul> <p>Each configuration key can have a different format depending if it's from the environment variable, or from the <code>application.yml</code> file. In the following section I will provide both format in the form <code>ENVIRONMENT_VARIABLE</code> / <code>application-property</code>.</p> <p>You can also specify configuration via the command line, when launching the <code>jar</code>. Use the <code>application-property</code> form, and prefix with <code>--</code>. For example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>java -jar komga.jar --server.servlet.context-path<span class="token operator">=</span><span class="token string">&quot;/komga&quot;</span> --server.port<span class="token operator">=</span><span class="token number">8443</span>
</code></pre></div><h2 id="optional-configuration"><a href="#optional-configuration" class="header-anchor">#</a> Optional configuration</h2> <p>You can use some optional configuration keys:</p> <h4 id="komga-configdir-komga-config-dir-directory"><a href="#komga-configdir-komga-config-dir-directory" class="header-anchor">#</a> KOMGA_CONFIGDIR / komga.config-dir: <code>&lt;directory&gt;</code></h4> <p>The Komga configuration directory. Will be used to store the logs, database, and any other file Komga needs.</p> <p>Defaults to <code>~/.komga</code>. <code>~</code> is your home directory on Unix, and your User profile on Windows.</p> <p><em>When overriding this configuration, you need to use <code>${user.home}</code> instead of <code>~</code> (this is a specific Spring Boot variable).</em></p> <h4 id="server-port-server-port-port"><a href="#server-port-server-port-port" class="header-anchor">#</a> SERVER_PORT / server.port: <code>&lt;port&gt;</code></h4> <p>Port to listen to for the API and web interface.</p> <p>Defaults to <code>8080</code>.</p> <h4 id="server-servlet-context-path-server-servlet-context-path-baseurl"><a href="#server-servlet-context-path-server-servlet-context-path-baseurl" class="header-anchor">#</a> SERVER_SERVLET_CONTEXT_PATH / server.servlet.context-path: <code>&lt;baseUrl&gt;</code></h4> <p>Base URL, useful if you need to reverse proxy with a subfolder.</p> <p>Defaults to <code>/</code>.</p> <h4 id="komga-libraries-scan-cron-komga-libraries-scan-cron-cron"><a href="#komga-libraries-scan-cron-komga-libraries-scan-cron-cron" class="header-anchor">#</a> KOMGA_LIBRARIES_SCAN_CRON / komga.libraries-scan-cron: <code>&lt;cron&gt;</code></h4> <p>A <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html" target="_blank" rel="noopener noreferrer">Spring cron expression<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for libraries periodic scans.
For example <code>0 0 * * * ?</code> will rescan every hour. <code>0 */15 * * * ?</code> will rescan every 15 minutes.</p> <p>To disable the periodic scan, set the value to <code>-</code>.</p> <p>Defaults to <code>0 0 */8 * * ?</code> (every 8 hours).</p> <h4 id="komga-libraries-scan-startup-komga-libraries-scan-startup-true-false"><a href="#komga-libraries-scan-startup-komga-libraries-scan-startup-true-false" class="header-anchor">#</a> KOMGA_LIBRARIES_SCAN_STARTUP / komga.libraries-scan-startup: <code>&lt;true/false&gt;</code></h4> <p>A boolean indicating if Komga should scan your libraries at startup.</p> <p>Defaults to <code>false</code>.</p> <h4 id="komga-libraries-scan-directory-exclusions-komga-libraries-scan-directory-exclusions-exclusions"><a href="#komga-libraries-scan-directory-exclusions-komga-libraries-scan-directory-exclusions-exclusions" class="header-anchor">#</a> KOMGA_LIBRARIES_SCAN_DIRECTORY_EXCLUSIONS / komga.libraries-scan-directory-exclusions: <code>&lt;exclusions&gt;</code></h4> <p>A list of patterns to exclude directories from the scan. If the full path contains any of the patterns, the directory will be ignored. If using the environment variable you need to use a comma-separated list.</p> <p>Defaults to <code>#recycle,@eaDir,@Recycle</code>.</p> <h4 id="komga-rememberme-key-komga-remember-me-key-key"><a href="#komga-rememberme-key-komga-remember-me-key-key" class="header-anchor">#</a> KOMGA_REMEMBERME_KEY / komga.remember-me.key: <code>&lt;key&gt;</code></h4> <p>If set, the remember-me auto-login feature will be activated, and will generate a cookie with encoded login information to perform auto-login. Set <code>&lt;key&gt;</code> to any random string.</p> <p>Not set by default, you need to set it to enable this feature.</p> <h4 id="komga-rememberme-validity-komga-remember-me-validity-duration"><a href="#komga-rememberme-validity-komga-remember-me-validity-duration" class="header-anchor">#</a> KOMGA_REMEMBERME_VALIDITY / komga.remember-me.validity: <code>&lt;duration&gt;</code></h4> <p>The validity of the generated remember-me cookie. You can specify the timeunit, for example <code>14d</code> for 14 days, or <code>24h</code> for 24 hours. If no unit is set, seconds will be used.</p> <p>Defaults to 2 weeks.</p> <h4 id="komga-sessiontimeout-komga-session-timeout-duration"><a href="#komga-sessiontimeout-komga-session-timeout-duration" class="header-anchor">#</a> KOMGA_SESSIONTIMEOUT / komga.session-timeout: <code>&lt;duration&gt;</code></h4> <p>The duration after which an inactive session will expire. You can specify the timeunit, for example <code>14d</code> for 14 days, or <code>24h</code> for 24 hours. If no unit is set, seconds will be used.</p> <p>Defaults to 7 days.</p> <h4 id="komga-database-file-komga-database-file-file-path"><a href="#komga-database-file-komga-database-file-file-path" class="header-anchor">#</a> KOMGA_DATABASE_FILE / komga.database.file: <code>&lt;file path&gt;</code></h4> <p>File path for the SQLite database.</p> <p>If you want to change the directory, it is advised to change <code>komga.config-dir</code> instead.</p> <p>Defaults to:</p> <ul><li><code>\${komga.config-dir}/database.sqlite</code> for <em>Jar</em>.</li> <li><code>/config/database.sqlite</code> for <em>Docker</em>.</li></ul> <h4 id="komga-cors-allowed-origins-komga-cors-allowed-origins-origins"><a href="#komga-cors-allowed-origins-komga-cors-allowed-origins-origins" class="header-anchor">#</a> KOMGA_CORS_ALLOWED_ORIGINS / komga.cors.allowed-origins: <code>&lt;origins&gt;</code></h4> <p>A list of origins to allow for CORS.</p> <p>Defaults to empty list.</p> <h4 id="komga-delete-empty-collections-komga-delete-empty-collections-true-false"><a href="#komga-delete-empty-collections-komga-delete-empty-collections-true-false" class="header-anchor">#</a> KOMGA_DELETE_EMPTY_COLLECTIONS / komga.delete-empty-collections: <code>&lt;true/false&gt;</code></h4> <p>A boolean indicating if Komga should delete empty collections after a scan.</p> <p>Defaults to <code>true</code>.</p> <h4 id="komga-delete-empty-read-lists-komga-delete-empty-read-lists-true-false"><a href="#komga-delete-empty-read-lists-komga-delete-empty-read-lists-true-false" class="header-anchor">#</a> KOMGA_DELETE_EMPTY_READ_LISTS / komga.delete-empty-read-lists: <code>&lt;true/false&gt;</code></h4> <p>A boolean indicating if Komga should delete empty read lists after a scan.</p> <p>Defaults to <code>true</code>.</p> <h4 id="komga-file-hashing-komga-file-hashing-true-false"><a href="#komga-file-hashing-komga-file-hashing-true-false" class="header-anchor">#</a> KOMGA_FILE_HASHING / komga.file-hashing: <code>&lt;true/false&gt;</code> <span class="badge warning" style="vertical-align:top;" data-v-15b7b770>removed since 0.143.0</span></h4> <p>This has been moved to <a href="/guides/libraries.html#compute-hash-for-files">Library options</a>.</p> <h4 id="komga-oauth2-account-creation-komga-oauth2-account-creation-true-false"><a href="#komga-oauth2-account-creation-komga-oauth2-account-creation-true-false" class="header-anchor">#</a> KOMGA_OAUTH2_ACCOUNT_CREATION / komga.oauth2-account-creation: <code>&lt;true/false&gt;</code></h4> <p>A boolean indicating whether Komga should create new users when a login via OAuth2/OIDC succeeds, but there is no existing user with that email.</p> <p>Such users will be created with a random password, which the user can subsequently change from the <em>Account Settings</em> page later on, for example to be able to connect using OPDS or Tachiyomi.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>It is recommended to enable this only with OAuth2 providers you control</p></div> <p>Defaults to <code>false</code>.</p> <h4 id="logging-file-name-logging-file-name-logfile-name"><a href="#logging-file-name-logging-file-name-logfile-name" class="header-anchor">#</a> LOGGING_FILE_NAME / logging.file.name: <code>&lt;logfile name&gt;</code></h4> <p>Name of the log file.</p> <p>If you want to change the directory, it is advised to change <code>komga.config-dir</code> instead.</p> <p>Defaults to:</p> <ul><li><code>\${komga.config-dir}/komga.log</code> for <em>Jar</em>.</li> <li><code>/config/logs/komga.log</code> for <em>Docker</em>.</li></ul> <p><em>When overriding this configuration, you need to use <code>${user.home}</code> instead of <code>~</code> (this is a specific Spring Boot variable).</em></p> <h4 id="komga-taskconsumers-komga-task-consumers-int"><a href="#komga-taskconsumers-komga-task-consumers-int" class="header-anchor">#</a> KOMGA_TASKCONSUMERS / komga.task-consumers: <code>&lt;int&gt;</code></h4> <p>The initial number of thread that will consume tasks. Must be positive and lower or equal to <code>komga.task-consumers-max</code>.</p> <p>Defaults to <code>1</code>.</p> <h4 id="komga-taskconsumersmax-komga-task-consumers-max-int"><a href="#komga-taskconsumersmax-komga-task-consumers-max-int" class="header-anchor">#</a> KOMGA_TASKCONSUMERSMAX / komga.task-consumers-max: <code>&lt;int&gt;</code></h4> <p>The maximum number of thread that will consume tasks. Must be positive and greater or equal to <code>komga.task-consumers</code>.</p> <p>Defaults to <code>1</code>.</p> <h2 id="sample-configuration-file"><a href="#sample-configuration-file" class="header-anchor">#</a> Sample Configuration File</h2> <p>Here is a sample <code>application.yml</code> file in case you need to customize it. Keep only the lines you need.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># Only keep lines that are relevant to you!</span>
<span class="token comment"># Lines starting with # are comments</span>
<span class="token comment"># Make sure indentation is correct (2 spaces at every indentation level), yaml is very sensitive!</span>
<span class="token key atrule">komga</span><span class="token punctuation">:</span>
  <span class="token key atrule">libraries-scan-cron</span><span class="token punctuation">:</span> <span class="token string">&quot;0 0 */8 * * ?&quot;</span>  <span class="token comment"># periodic scan every 8 hours</span>
  <span class="token key atrule">libraries-scan-cron</span><span class="token punctuation">:</span> <span class="token string">&quot;-&quot;</span>              <span class="token comment"># disable periodic scan</span>
  <span class="token key atrule">libraries-scan-startup</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>         <span class="token comment"># scan libraries at startup</span>
  <span class="token key atrule">libraries-scan-directory-exclusions</span><span class="token punctuation">:</span>  <span class="token comment"># patterns to exclude directories from the scan</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;#recycle&quot;</span> <span class="token comment"># synology NAS recycle bin</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;@eaDir&quot;</span>   <span class="token comment"># synology NAS index/metadata folders</span>
    <span class="token punctuation">-</span> <span class="token string">&quot;@Recycle&quot;</span> <span class="token comment"># QNAP NAS recycle bin</span>
  <span class="token key atrule">remember-me</span><span class="token punctuation">:</span>
    <span class="token key atrule">key</span><span class="token punctuation">:</span> changeMe<span class="token tag">!</span>    <span class="token comment"># required to activate the remember-me auto-login via cookies</span>
    <span class="token key atrule">validity</span><span class="token punctuation">:</span> 30d     <span class="token comment"># validity of the cookie in seconds, here 30 days</span>
  <span class="token key atrule">session-timeout</span><span class="token punctuation">:</span> 7d <span class="token comment"># session timeout, here 7 days</span>
  <span class="token key atrule">database</span><span class="token punctuation">:</span>
    <span class="token key atrule">file</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>user.home<span class="token punctuation">}</span>/.komga/database.sqlite
  <span class="token key atrule">cors.allowed-origins</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8081</span>
    <span class="token punctuation">-</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8082</span>
  <span class="token key atrule">delete-empty-collections</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">delete-empty-read-lists</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">servlet.context-path</span><span class="token punctuation">:</span> /komga
</code></pre></div><h2 id="database-performance"><a href="#database-performance" class="header-anchor">#</a> Database performance</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Use at your own risk!</p></div> <p>Some specific configuration keys are available to tweak the database performance.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">komga</span><span class="token punctuation">:</span>
  <span class="token key atrule">database</span><span class="token punctuation">:</span>
    <span class="token comment"># sets the retry timeout when SQLITE_BUSY error happens</span>
    <span class="token key atrule">busy-timeout</span><span class="token punctuation">:</span> 30s
    
    <span class="token comment"># changes the journal mode</span>
    <span class="token comment"># accepted values are: DELETE, TRUNCATE, PERSIST, MEMORY, WAL, OFF</span>
    <span class="token comment"># most likely to be set to wal if needed, check https://sqlite.org/wal.html for more details</span>
    <span class="token key atrule">journal-mode</span><span class="token punctuation">:</span> wal
    
    <span class="token comment"># pool size will determine the number of connections in the pool</span>
    <span class="token comment"># this takes precedence over max-pool-size if set</span>
    <span class="token comment"># defaults to undefined</span>
    <span class="token key atrule">pool-size</span><span class="token punctuation">:</span> <span class="token number">1</span>
    
    <span class="token comment"># max-pool-size will determine the maximum number of connections in the pool</span>
    <span class="token comment"># when set, the number of connections is set to the number of available processors capped at max-pool-size</span>
    <span class="token comment"># defaults to 1</span>
    <span class="token key atrule">max-pool-size</span><span class="token punctuation">:</span> <span class="token number">8</span>
    
    <span class="token comment"># pragmas accepts a list of key/value pairs where:</span>
    <span class="token comment"># - key is the pragma name (see https://www.sqlite.org/pragma.html)</span>
    <span class="token comment"># - value is the pragma value</span>
    <span class="token key atrule">pragmas</span><span class="token punctuation">:</span>
      <span class="token comment"># here are some example pragmas</span>
      <span class="token key atrule">page_size</span><span class="token punctuation">:</span> <span class="token number">1024</span>
      <span class="token key atrule">synchronous</span><span class="token punctuation">:</span> OFF
</code></pre></div><h2 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h2> <p>If you want to open your Komga server outside your local network, it is strongly advised to secure it with <code>https</code> (especially due to the use of http basic authentication).</p> <p>Spring Boot supports <code>https</code> out of the box, but you will have to configure it, and <code>https</code> is most useful only with valid certificates (not self-signed), which most people don't readily have available.</p> <p>I recommend using <a href="https://caddyserver.com/" target="_blank" rel="noopener noreferrer">Caddy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> as a reverse proxy, as it supports the automatic generation of <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Let's Encrypt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> certificates.</p> <h2 id="reverse-proxy"><a href="#reverse-proxy" class="header-anchor">#</a> Reverse proxy</h2> <p>Here are some sample configuration on how to configure reverse proxy for Komga.</p> <h3 id="caddy-v1"><a href="#caddy-v1" class="header-anchor">#</a> Caddy (v1)</h3> <p>Without a base URL configured in Komga, using a subdomain:</p> <div class="language- extra-class"><pre class="language-text"><code>komga.yourdomain.com {
  proxy / http://your-komga-server:8080 {
    transparent
  }
}
</code></pre></div><p>With a base URL configured in Komga:</p> <div class="language- extra-class"><pre class="language-text"><code>yourdomain.com {
  proxy /komga http://your-komga-server:8080 {
    transparent
  }
}
</code></pre></div><h3 id="caddy-v2"><a href="#caddy-v2" class="header-anchor">#</a> Caddy (v2)</h3> <p>Without a base URL configured in Komga, using a subdomain:</p> <div class="language- extra-class"><pre class="language-text"><code>komga.yourdomain.com {
  reverse_proxy http://your-komga-server:8080
}
</code></pre></div><p>With a base URL configured in Komga:</p> <div class="language- extra-class"><pre class="language-text"><code>yourdomain.com {
  reverse_proxy /komga/* http://your-komga-server:8080
}
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/gotson/komga-website/edit/master/src/installation/configuration.md" target="_blank" rel="noopener noreferrer">Help us improve this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/2/2022, 9:32:13 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/installation/webui.html" class="prev">
        Accessing the web interface
      </a></span> <span class="next"><a href="/installation/oauth2.html">
        Social login
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c8d3c045.js" defer></script><script src="/assets/js/3.51ebd44a.js" defer></script><script src="/assets/js/35.be5a375f.js" defer></script><script src="/assets/js/4.d9766c2e.js" defer></script>
  </body>
</html>
